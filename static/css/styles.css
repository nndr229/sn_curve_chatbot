/* ===========================
   MOBILE FIRST OPTIMIZATIONS
   Append to end of styles.css
   =========================== */

/* Reduce default paddings/margins on small screens */
:root{
  --space-1: 8px;
  --space-2: 12px;
  --space-3: 16px;
}

/* Base: treat layout as single column */
main{
  display:flex;
  flex-direction:column;
  gap: var(--space-2);
  padding: var(--space-2);
  min-height: calc(100dvh - 56px); /* mobile-friendly viewport */
}

/* Panels full width stack */
.sidebar,
.canvas-wrap,
.chat-wrap { width: 100%; }

/* Inputs & selects: bigger tap targets */
input, select {
  font-size: 16px;             /* prevents iOS zoom on focus */
  padding: 12px 14px;
  border-radius: 14px;
}

/* Buttons: comfy taps */
.btn { padding: 12px 16px; border-radius: 16px; }

/* Form grid becomes single column on small screens */
.grid { grid-template-columns: 1fr; }

/* Canvas area: taller on phones, adaptive */
#canvas-holder{
  height: 54dvh;                /* takes ~half the screen */
  min-height: 320px;
}

/* Legend scrollable, compact */
.legend { padding: var(--space-2); }
#curveList{
  max-height: 24dvh;
  padding-left: 18px;
}

/* Chat: keep input fixed at bottom of its card, good for on-screen keyboards */
.chat-wrap{
  display:flex;
  flex-direction:column;
  max-height: 42dvh;
}
.chat-window{
  flex:1;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
}
.chat-input{
  position: sticky;
  bottom: 0;
  background: var(--md-sys-color-surface-1);
  padding: var(--space-2);
  gap: var(--space-2);
}
.chat-input input{
  flex:1;
  min-height: 44px;
}

/* Header compaction */
header { padding: 10px var(--space-2); }
header h1 { font-size: 1rem; }
.tag { font-size: .85rem; }

/* iOS safe area support */
body, header, .chat-input {
  padding-left: max(env(safe-area-inset-left), 0px);
  padding-right: max(env(safe-area-inset-right), 0px);
}
header { padding-top: calc(10px + env(safe-area-inset-top)); }
.chat-input { padding-bottom: calc(var(--space-2) + env(safe-area-inset-bottom)); }

/* ====== Tablets and up ====== */
@media (min-width: 768px){
  main{
    display:grid;
    grid-template-columns: 320px 1fr;
    grid-template-areas:
      "sidebar canvas"
      "sidebar chat";
  }
  .sidebar{ grid-area: sidebar; }
  .canvas-wrap{ grid-area: canvas; }
  .chat-wrap{ grid-area: chat; max-height: none; }
  #canvas-holder{ height: 50vh; }
  #curveList{ max-height: 18vh; }
}

/* ====== Desktops and up ====== */
@media (min-width: 1100px){
  main{
    grid-template-columns: 320px 1fr 360px;
    grid-template-areas: "sidebar canvas chat";
  }
  #canvas-holder{ height: 520px; }
}
